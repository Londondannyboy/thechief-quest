#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# Run ESLint with auto-fix
echo "ğŸ“ Fixing ESLint issues..."
npm run lint -- --fix

# Check TypeScript
echo "ğŸ”§ Checking TypeScript..."
npx tsc --noEmit

# If TypeScript fails, try to build anyway
if [ $? -ne 0 ]; then
  echo "âš ï¸  TypeScript has errors, attempting build..."
  npm run build
fi

echo "âœ… Pre-push checks complete!"